# 7. Gatekeeper AvanÃ§ado: MonitorizaÃ§Ã£o ContÃ­nua 24/7

## âš ï¸ IMPORTANTE: Ordem na Raiz do Projeto

**A Ordem deve estar sempre na raiz do projeto!**

Se clonaste a Ordem, o caminho deve ser:

```
/Users/teu_nome/teu_projeto/ordem/
```

**NÃƒO** dentro de subpastas como:

```
âŒ /Users/teu_nome/teu_projeto/meu_app/ordem/
âŒ /Users/teu_nome/teu_projeto/src/ordem/
```

## ğŸ›¡ï¸ O que Ã© o Gatekeeper AvanÃ§ado?

O **Gatekeeper AvanÃ§ado** Ã© um sistema de monitorizaÃ§Ã£o contÃ­nua que:

- ğŸ” Verifica a saÃºde do sistema a cada 60 segundos
- ğŸ“ Guarda logs automÃ¡ticos para anÃ¡lise
- âš ï¸ Alerta para problemas de rede, disco, memÃ³ria
- ğŸ›¡ï¸ Protege o sistema 24/7

## ğŸš€ Como Ativar

### 1. Tornar ExecutÃ¡vel (Copiar e Colar)

```bash
chmod +x ordem/gatekeeper_avancado/gatekeeper_avancado_loop.sh
```

### 2. Ativar o Gatekeeper AvanÃ§ado

```bash
./ordem/gatekeeper_avancado/gatekeeper_avancado_loop.sh
```

**Resultado esperado:**

```
[INFO] [2025-10-02 16:05:42] ğŸ›¡ï¸ WATCHDOG INICIADO
[INFO] [2025-10-02 16:05:42] ğŸ” MonitorizaÃ§Ã£o contÃ­nua ativada
[INFO] [2025-10-02 16:05:42] â° Intervalo normal: 60s
[INFO] [2025-10-02 16:05:42] ğŸ“ Logs em: .../gatekeeper_avancado_20251002.log
[INFO] [2025-10-02 16:05:42] â–¶ï¸ DiagnÃ³stico iniciado
[INFO] [2025-10-02 16:05:42] âœ… Conectividade de rede: OK
[INFO] [2025-10-02 16:05:42] âœ… EspaÃ§o em disco: OK (5% usado)
[WARNING] [2025-10-02 16:05:42] âš ï¸ MemÃ³ria: ALTA (100% usado)
[WARNING] [2025-10-02 16:05:42] âš ï¸ Servidor Python: INATIVO
[INFO] [2025-10-02 16:05:42] âœ… Logs de sistema: SEM ERROS RECENTES
[INFO] [2025-10-02 16:05:42] âœ… Ficheiro crÃ­tico: /etc/passwd existe
[INFO] [2025-10-02 16:05:42] âœ… DiagnÃ³stico concluÃ­do
[INFO] [2025-10-02 16:05:42] ğŸ’¤ Aguardando 60s atÃ© prÃ³ximo ciclo...
```

## ğŸ›‘ Como Parar

### 3.1. InterrupÃ§Ã£o Limpa (Recomendado)

```bash
# No terminal onde estÃ¡ a correr, pressiona:
Ctrl + C
```

**Resultado esperado:**

```
^C
[INFO] [2025-10-02 16:10:42] ğŸ›‘ WATCHDOG PARADO (interrupÃ§Ã£o limpa)
[INFO] [2025-10-02 16:10:42] ğŸ“ Logs guardados em: .../gatekeeper_avancado_20251002.log
```

### 3.2. Remover Lockfile (Se Ctrl+C nÃ£o funcionar)

```bash
rm ordem/gatekeeper_avancado/.gatekeeper_avancado.lock
```

**Quando usar:**

- Se o terminal nÃ£o responde ao Ctrl+C
- Se o processo ficou "preso"
- Para forÃ§ar paragem completa

### 3.3. Matar Processo (Ãšltimo recurso)

```bash
# Encontrar o processo
ps aux | grep gatekeeper_avancado_loop.sh

# Matar o processo (substitui XXXX pelo PID)
kill -9 XXXX
```

**Quando usar:**

- Apenas se as outras opÃ§Ãµes falharem
- Processo completamente bloqueado
- Sistema nÃ£o responde

## ğŸ“Š O que Significam os Avisos?

### âœ… **Verde (OK):**

- `Conectividade de rede: OK` - Internet funcionando
- `EspaÃ§o em disco: OK` - Disco com espaÃ§o suficiente
- `Logs de sistema: SEM ERROS` - Sistema estÃ¡vel
- `Ficheiro crÃ­tico: existe` - Ficheiros importantes presentes

### âš ï¸ **Amarelo (AtenÃ§Ã£o):**

- `MemÃ³ria: ALTA (100% usado)` - **Normal no macOS**
- `Servidor Python: INATIVO` - **Normal se nÃ£o tiveres servidor Python**

### âŒ **Vermelho (Problema):**

- `Conectividade de rede: FALHA` - Problemas de internet
- `EspaÃ§o em disco: CRÃTICO` - Disco quase cheio
- `Logs de sistema: ERROS` - Problemas no sistema

## ğŸ“ Logs AutomÃ¡ticos

Os logs sÃ£o guardados automaticamente em:

```
ordem/gatekeeper_avancado/gatekeeper_avancado_logs/
â””â”€â”€ gatekeeper_avancado_YYYYMMDD.log
```

**Exemplo de log:**

```
[INFO] [2025-10-02 16:05:42] ğŸ›¡ï¸ WATCHDOG INICIADO
[INFO] [2025-10-02 16:05:42] âœ… Conectividade de rede: OK
[INFO] [2025-10-02 16:05:42] âœ… EspaÃ§o em disco: OK (5% usado)
[WARNING] [2025-10-02 16:05:42] âš ï¸ MemÃ³ria: ALTA (100% usado)
```

## ğŸ¯ Resumo RÃ¡pido

1. **Ativar**: `./ordem/gatekeeper_avancado/gatekeeper_avancado_loop.sh`
2. **Parar**: `Ctrl + C` (interrupÃ§Ã£o limpa)
3. **ForÃ§ar paragem**: `rm ordem/gatekeeper_avancado/.gatekeeper_avancado.lock`
4. **Logs**: Guardados automaticamente em `gatekeeper_avancado_logs/`

O **Gatekeeper AvanÃ§ado** protege o teu sistema 24/7! ğŸ›¡ï¸
